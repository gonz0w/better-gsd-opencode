# Milestone v6.0: UX & Developer Experience

**Status:** SHIPPED 2026-02-27
**Phases:** 30-36
**Total Plans:** 11

## Overview

Give developers a polished CLI experience — formatted output, branded visuals, and consistent UX — so GSD commands are pleasant to use in terminals while remaining machine-readable when piped.

## Phases

### Phase 30: Formatting Foundation & Smart Output

**Goal**: Shared formatting engine and TTY-aware output mode — the infrastructure every command renderer depends on
**Depends on**: Nothing (foundation phase)
**Requirements**: FMT-01, FMT-02, FMT-03, FMT-04, FMT-05, OUT-01, OUT-02, OUT-03, OUT-04
**Plans**: 2 plans

Plans:
- [x] 30-01: Formatting primitives — src/lib/format.js with color (picocolors pattern), formatTable (PSql-style), progressBar, banner, box, SYMBOLS constants (431 lines)
- [x] 30-02: Smart output mode — TTY auto-detection, --pretty flag, --raw removal from 22 workflow files, brand rename to bGSD

**Details:**
- Single-module format.js with all formatting primitives
- ~2KB picocolors inline pattern rather than external color dependency
- PSql-style table layout (header + dash separator) — no box-drawing borders
- TTY auto-detection with --pretty override and backward-compat --raw as silent no-op

### Phase 31: Quality Gates & Format Testing

**Goal**: Test suite is green and new formatting utilities have coverage — no regressions before building on Phase 30
**Depends on**: Phase 30 (formatting foundation)
**Requirements**: QUAL-01, QUAL-02
**Plans**: 2 plans

Plans:
- [x] 31-01: Fix outputJSON rawValue bug — piped commands always produce JSON, fixed 2 command bypasses, 305 --raw flags cleaned from tests
- [x] 31-02: Format utility test suite — 45 tests covering all 18 format.js exports, subprocess NO_COLOR verification

**Details:**
- outputJSON mode-aware: rawValue only in formatted/pretty mode, not json mode
- Fixed 2 command bypasses (state load, codebase rules) routing through output()

### Phase 32: Init & State Command Renderers

**Goal**: Most-used commands produce clean branded output developers want to read
**Depends on**: Phase 30 (formatting foundation)
**Requirements**: CMD-01, CMD-02
**Plans**: 1 plan

Plans:
- [x] 32-01: Add formatters to init progress, state show, state update-progress (user-facing only)

**Details:**
- Formatter function pattern: formatXyz(result) wired via output(result, { formatter })
- Only user-facing commands migrated — agent-consumed commands left untouched

### Phase 33: Verify & Codebase Command Renderers

**Goal**: Verification and codebase analysis commands render summary tables with pass/fail indicators
**Depends on**: Phase 30 (formatting foundation)
**Requirements**: CMD-03, CMD-04
**Plans**: 1 plan

Plans:
- [x] 33-01: Add formatters to verify requirements/quality, codebase status/analyze (user-facing only)

**Details:**
- Color-coded quality grades (A-F) and staleness indicators
- Codebase conventions, deps, and context all produce readable formatted output

### Phase 34: Feature & Intent Command Renderers

**Goal**: All remaining user-facing commands adopt shared formatting
**Depends on**: Phase 30 (formatting foundation)
**Requirements**: CMD-05, CMD-06
**Plans**: 1 plan

Plans:
- [x] 34-01: Add formatters to velocity, quick-summary, intent show/validate/drift (user-facing only)

**Details:**
- Replaced all inline ANSI codes with shared utilities
- output() uses process.exitCode || 0 to preserve non-zero exits from validate commands

### Phase 35: Workflow Output Tightening

**Goal**: Agent-consumed workflow output is leaner — less noise, higher information density
**Depends on**: Phase 30 (formatting foundation)
**Requirements**: WKFL-04, WKFL-05, WKFL-06, WKFL-07
**Plans**: 2 plans

Plans:
- [x] 35-01: ui-brand.md bGSD branding — format.js function references, concrete command output examples
- [x] 35-02: Workflow + reference file tightening — 455-line reduction across 27 files, help.md cut 44%, all --raw and standalone GSD references eliminated

**Details:**
- Brand renamed in titles/headings only — command names (/gsd-*) unchanged
- help.md offered largest tightening opportunity (44% reduction)

### Phase 36: Integration & Polish

**Goal**: All slash commands wired, deployment updated, documentation current, bundle verified
**Depends on**: Phase 34 (all command renderers), Phase 35 (workflow output)
**Requirements**: INTG-01, INTG-02, INTG-03, QUAL-03
**Plans**: 2 plans

Plans:
- [x] 36-01: Command wrappers + deploy — 11 slash command wrappers in commands/ directory, deploy.sh safe sync
- [x] 36-02: AGENTS.md rewrite + validation — lean 59-line index, dead code sweep, 574 tests pass, 681KB bundle

**Details:**
- AGENTS.md reduced from 90 to 59 lines — orientation-only index
- Backward compatibility layer for output(result, boolean) still present

---

## Milestone Summary

**Key Decisions:**
- Single-module design for format.js — all primitives in one file
- Picocolors inline pattern (~2KB) rather than external color dependency
- PSql-style table layout — no box-drawing borders
- TTY auto-detection with --pretty override and --raw as silent no-op
- Formatter function pattern: formatXyz(result) wired via output(result, { formatter })
- Only user-facing commands migrated to formatters — agent-consumed commands untouched
- Brand renamed to bGSD in titles/headings only
- AGENTS.md reduced to lean 59-line index

**Issues Resolved:**
- Fixed outputJSON rawValue bug (77 test failures -> 0)
- Fixed 2 command bypasses (state load, codebase rules)
- Fixed 3 pre-existing test failures (tmpFiles search, grep pattern, bundle size budget)
- Fixed duplicate module.exports in router.js
- Fixed exit code lost by output() for intent validate

**Issues Deferred:**
- None — all v6.0 requirements complete

**Technical Debt Incurred:**
- Bundle at 681KB / 1000KB budget (budget raised from 700KB)
- Backward compatibility layer for output(result, boolean) still present

---

_For current project status, see .planning/ROADMAP.md_
