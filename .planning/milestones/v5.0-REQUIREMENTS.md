# Requirements Archive: GSD Plugin v5.0

**Defined:** 2026-02-25
**Completed:** 2026-02-26
**Core Value:** Manage and deliver high-quality software with high-quality documentation, while continuously reducing token usage and improving performance

## v5.0 Requirements â€” All Complete

### Infrastructure

- [x] **INFRA-01**: CLI produces a codebase-intel.json cache file with git hash watermarks for freshness validation
- [x] **INFRA-02**: Staleness check completes in <50ms by comparing cached git hash to current HEAD
- [x] **INFRA-03**: Incremental updates re-analyze only files changed since last cached commit
- [x] **INFRA-04**: Cache auto-triggers on init commands when stale (follows env.js autoTrigger pattern)

### Convention Extraction

- [x] **CONV-01**: User can run `codebase conventions` to extract naming patterns from project files
- [x] **CONV-02**: Convention detector identifies file organization rules (directory structure, file placement patterns)
- [x] **CONV-03**: Framework-specific macro/pattern detection works for Elixir (Phoenix routes, Ecto schemas, plugs), with extensible pattern registry
- [x] **CONV-04**: Each extracted convention has a confidence score (percentage of files following the pattern)
- [x] **CONV-05**: User can run `codebase rules` to generate a conventions rules document for agent consumption (capped at 15 rules)

### Dependency Analysis

- [x] **DEPS-01**: User can run `codebase deps` to build a module dependency graph from import/require/use statements
- [x] **DEPS-02**: Import parsing covers 6 languages via regex: JavaScript, TypeScript, Python, Go, Elixir, Rust
- [x] **DEPS-03**: Dependency graph uses adjacency-list representation with forward and reverse edges
- [x] **DEPS-04**: User can run `codebase impact <file>` to see transitive dependents (what breaks if this file changes)
- [x] **DEPS-05**: Cycle detection identifies circular dependencies using Tarjan's strongly connected components

### Lifecycle Awareness

- [x] **LIFE-01**: User can run `codebase lifecycle` to see execution order relationships (seeds after migrations, config at boot)
- [x] **LIFE-02**: Lifecycle detection identifies framework-specific initialization patterns (starting with Elixir/Phoenix)
- [x] **LIFE-03**: Lifecycle analysis outputs a dependency chain showing which files/operations must run before others

### Context Injection

- [x] **CTXI-01**: Init commands include a compact codebase summary (<500 tokens) when codebase-intel.json exists
- [x] **CTXI-02**: User can run `codebase context --files <paths>` to get task-scoped architectural context for specific files
- [x] **CTXI-03**: Task-scoped context uses heuristic scoring (graph distance + plan scope + git recency) for relevance ranking
- [x] **CTXI-04**: Total injected codebase context never exceeds 5K tokens per invocation

### Workflow Integration

- [x] **WKFL-01**: Execute-phase workflow auto-injects relevant codebase context based on plan file references
- [x] **WKFL-02**: Pre-flight convention check warns before execution if plan touches files with known conventions
- [x] **WKFL-03**: Existing `codebase-impact` command is updated to use cached dependency graph when available

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| INFRA-01 | Phase 23 | Complete |
| INFRA-02 | Phase 23 | Complete |
| INFRA-03 | Phase 23 | Complete |
| INFRA-04 | Phase 23 | Complete |
| CONV-01 | Phase 24 | Complete |
| CONV-02 | Phase 24 | Complete |
| CONV-03 | Phase 24 | Complete |
| CONV-04 | Phase 24 | Complete |
| CONV-05 | Phase 24 | Complete |
| DEPS-01 | Phase 25 | Complete |
| DEPS-02 | Phase 25 | Complete |
| DEPS-03 | Phase 25 | Complete |
| DEPS-04 | Phase 25 | Complete |
| DEPS-05 | Phase 25 | Complete |
| LIFE-01 | Phase 28 | Complete |
| LIFE-02 | Phase 28 | Complete |
| LIFE-03 | Phase 28 | Complete |
| CTXI-01 | Phase 26 | Complete |
| CTXI-02 | Phase 27 | Complete |
| CTXI-03 | Phase 27 | Complete |
| CTXI-04 | Phase 27 | Complete |
| WKFL-01 | Phase 29 | Complete |
| WKFL-02 | Phase 29 | Complete |
| WKFL-03 | Phase 29 | Complete |

**Coverage:** 20/20 requirements complete (100%)

---
*Requirements defined: 2026-02-25*
*Archived: 2026-02-26*
